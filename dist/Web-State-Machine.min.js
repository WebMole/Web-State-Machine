/*! Web-State-Machine - v0.0.1 - 2013-09-30
* Copyright (c) 2013 ; Licensed  */
function BacktrackWsm(){this.VanillaWsm=VanillaWsm,this.VanillaWsm(),this.processReset=function(){if(0===this.m_pathSinceBeginning.getLength())return!1;if(this.m_pathSinceBeginning.popLastElement(),0===this.m_pathSinceBeginning.getLength())return!1;var a=this.m_pathSinceBeginning.peekLastElement(),b=new WsmEdge;b.setDestination(a.getDestination());var c=new PathSequence;return c.append(b),this.m_pathToFollow=c,!0}}function PathSegment(){this.m_name="",this.m_position=0,this.getName=function(){return this.m_name},this.getPosition=function(){return this.m_position},this.toString=function(){return this.m_name+"["+this.m_position+"]"},this.parseFromString=function(a){var b=a.split("[");1==b.length?this.m_name=a:(this.m_name=b[0],this.m_position=parseInt(b[1].substring(0,b[1].length-1),10))}}function PathExpression(a){this.m_pieces=[],this.getLength=function(){return this.m_pieces.length},this.toString=function(){for(var a="",b=0;b<this.m_pieces.length;b++){var c=this.m_pieces[b];a+="/"+c.toString()}return a},this.parseFromString=function(a){for(var b=a.split("/"),c=0;c<b.length;c++){var d=b[c],e=new PathSegment;e.parseFromString(d),this.m_pieces.push(e)}},this.getSegment=function(a){return 0>a||a>=this.m_pieces.length?(console.error("Index out of bounds in PathExpression.getSegment"),null):this.m_pieces[a]},this.getLastSegment=function(){return this.m_pieces.length>=1?this.getSegment(this.m_pieces.length-1):null},this.contains=function(a){for(var b=0;b<this.m_pieces.length;b++){var c=this.m_pieces[b];if(c.getName()===a)return!0}return!1},void 0!==a&&this.parseFromString(a)}function DomNodeAttribute(a,b){this.m_name=a,this.m_value=b}function DomNode(a){this.m_isLeaf=!1,this.m_name="",this.m_attributes=[],this.m_handlers=[],this.m_children=[],this.m_mark=0,this.toString=function(a){var b="<",c=">";a===!0&&(b="&lt;",c="&gt;");var d="";if(this.m_isLeaf===!0)return this.m_name;d+=b+this.m_name+" mark="+this.m_mark;for(var e=0;e<this.m_attributes.length;e++){var f=this.m_attributes[e];d+=" "+f.m_name+'="'+f.m_value+'"'}for(d+=c+"\n",e=0;e<this.m_children.length;e++){var g=this.m_children[e];d+=g.toString(a)}return d+="&lt;/"+this.m_name+"&gt;\n"},this.setMark=function(a){this.m_mark=a},this.getMark=function(){return this.m_mark},this.resetMark=function(){this.m_mark=0},this.setAllMarks=function(a){this.m_mark=a;for(var b=0;b<this.m_children.length;b++){var c=this.m_children[b];c.setAllMarks(a)}},this.getName=function(){return this.m_name},this.prefixLookForMark=function(a,b){if(this.m_isLeaf)return null;if(void 0===b&&(b=this.m_name),this.m_mark==a)return b;for(var c=[],d=0;d<this.m_children.length;d++){var e=this.m_children[d],f=e.m_name;void 0===c[f]?c[f]=0:c[f]++;var g=b+"/"+f+"["+c[f]+"]",h=e.prefixLookForMark(a,g);if(null!==h)return h}return null},this.getElementFromPathString=function(a){var b=new PathExpression(a);return this.getElementFromPath(b)},this.getElementFromPath=function(a,b){if(void 0===b&&(b=0),b>a.getLength()-1)return console.error("Error processing path"),null;if(b==a.getLength()-1)return this;for(var c=a.getSegment(b+1),d=c.getPosition(),e=c.getName(),f=0,g=0;g<this.m_children.length;g++){var h=this.m_children[g],i=h.m_name;if(e==i){if(f==d)return h.getElementFromPath(a,b+1);f++}}return null},this.setAttribute=function(a,b){for(var c=0;c<this.m_attributes.length;c++){var d=this.m_attributes[c],e=d.m_name;if(a===e)return d.m_value=b,void 0}var f=new DomNodeAttribute(a,b);this.m_attributes.push(f)},this.equals=function(a){var b=0;if(void 0===a)return!1;if(!DomNode.prototype.isPrototypeOf(a))return!1;if(this.m_name!==a.m_name)return!1;if(this.m_isLeaf!==a.m_isLeaf)return!1;if(this.m_children.length!==a.m_children.length)return!1;if(!DomNode.IGNORE_ATTRIBUTES){if(this.m_attributes.length!==a.m_attributes.length)return!1;for(b=0;b<this.m_attributes.length;b++){var c=this.m_attributes[b],d=a.m_attributes[b];if(void 0===d)return!1;if(c.m_name!==d.m_name)return!1;if(c.m_value!==d.m_value)return!1}}for(b=0;b<this.m_children.length;b++){var e=this.m_children[b],f=a.m_children[b];if(void 0===f)return!1;if(!e.equals(f))return!1}return!0},this.getByteSize=function(){for(var a=4,b=0;b<this.m_children.length;b++){var c=this.m_children[b];a+=c.getByteSize()}for(var d=0;d<this.m_attributes.length;d++){var e=this.m_attributes[d];a+=e.m_name.length+e.m_value.length}return a},this.countNodes=function(){for(var a=1,b=0;b<this.m_children.length;b++){var c=this.m_children[b];a+=c.countNodes()}return a},this.getAttribute=function(a){for(var b=0;b<this.m_attributes.length;b++){var c=this.m_attributes[b];if(c.m_name==a)return c.m_value}return null},this.clone=function(a){var b=0;if(!(a instanceof DomNode))return console.error("Trying to clone DomNode from an object that is not a DomNode"),void 0;for(this.m_name=a.m_name,this.m_isLeaf=a.m_isLeaf,this.m_attributes=[],b=0;b<a.m_attributes;b++){var c=a.m_attributes[b];this.m_attributes.push(new DomNodeAttribute(c.m_name,c.m_value))}for(this.m_handlers=[],a.m_handlers["on-click"]===!0&&(this.m_handlers["on-click"]=!0),this.m_children=[],b=0;b<a.m_children.length;b++){var d=a.m_children[b];this.m_children.push(new DomNode(d))}},this.toXml=function(a){var b=0;void 0===a&&(a="");var c="";c+=a+"<domNode>\n";var d=this.m_name;for(this.m_isLeaf&&(d="<![CDATA["+d+"]]>"),c+=a+"  <name>"+d+"</name>\n",c+=a+"  <children>\n",b=0;b<this.m_children.length;b++){var e=this.m_children[b];c+=e.toXml(a+"    ")+"\n"}if(c+=a+"  </children>\n",!DomNode.IGNORE_ATTRIBUTES){for(c+="  <attributes>\n",b=0;b<this.m_attributes.length;b++){var f=this.m_attributes[b];c+='    <attribute name="'+f.m_name+'"><![CDATA['+f.m_value+"]]></attribute>\n"}c+="  </attributes>\n"}return c+=a+"  <mark><![CDATA["+this.m_mark+"]]></mark>\n",c+=a+"</domNode>\n"},void 0!==a&&a instanceof DomNode&&this.clone(a)}function get_element_from_path(a,b,c){if(void 0===c&&(c=1),c>b.getLength())return console.error("Error processing path"),void 0;if(c==b.getLength())return a;for(var d=b.getSegment(c),e=d.getPosition(),f=d.getName(),g=0,h=0;h<a.childNodes.length;h++){var i=a.childNodes[h],j=i.nodeName;if(f==j){if(g==e)return get_element_from_path(i,b,c+1);g++}}return null}function NoBacktrackWsm(){this.VanillaWsm=VanillaWsm,this.VanillaWsm(),this.SAFE_COUNT=50,this.processReset=function(a){this.m_pathSinceBeginning.clear(),void 0===a&&(a=1),this.getNodeFromId(a);var b=[],c=new WsmEdge;c.setDestination(a);var d=new PathSequence;d.append(c),b.push(d);var e=this.findPath(b);return null===e?!1:(this.m_pathToFollow=e,!0)},this.findPath=function(a){for(var b=[],c=0;c<this.SAFE_COUNT&&a.length>0;c++){for(var d=0;d<a.length;d++){var e=a[d],f=e.peekLastElement(),g=f.getDestination();b[g]=!0;var h=this.getNodeFromId(g);if(!h.isExhausted(this.isAcceptableClick))return e}for(var i=[];a.length>0;){var j=a.shift(),k=j.peekLastElement(),l=k.getDestination(),m=this.m_edges[l];void 0===m&&(m=[]);for(var n=0;n<m.length;n++){var o=m[n],p=o.getDestination();if(b[p]!==!0){var q=new PathSequence(j);q.append(o),i.push(q)}}}a=i}return null}}function TansuoWsm(){this.NoBacktrackWsm=NoBacktrackWsm,this.NoBacktrackWsm(),this.m_targetId=null,this.processReset=function(a){if(0===this.m_pathSinceBeginning.getLength())return!1;if(this.m_pathSinceBeginning.popLastElement(),0===this.m_pathSinceBeginning.getLength())return!1;void 0===a&&(a=1);for(var b=this.m_pathSinceBeginning.getLength(),c=b-1;c>=0;c--){var d=this.m_pathSinceBeginning.getElement(c),e=d.getDestination();if(e==a)break}for(var f=new PathSequence,g=c;b>g;g++){var h=this.m_pathSinceBeginning.getElement(g);f.append(h)}return this.m_pathToFollow=f,!0}}function VanillaWsm(){this.WebStateMachine=WebStateMachine,this.WebStateMachine(),this.isAcceptableClick=function(a){var b=new PathExpression(a);if(!b.contains("BODY")&&!b.contains("body"))return!1;var c=b.getLastSegment();return"BODY"===c.m_name||"body"===c.m_name?!1:b.contains("SCRIPT")?!1:!0},this.nodesEqual=function(a,b){return void 0===a||null===a||void 0===b||null===b?!1:a.equals(b)},this.processReset=function(){this.m_pathSinceBeginning.clear();for(var a=0;a<this.m_nodes.length;a++){var b=this.m_nodes[a];if(!b.isExhausted()){var c=new WsmEdge(0);c.setDestination(b.getId()),c.setContents("");var d=new PathSequence;return d.append(c),this.m_pathToFollow=d,!0}}return!1},this.abstractNode=function(a){return a}}function WebOnePointOhWsm(){this.VanillaWsm=VanillaWsm,this.VanillaWsm(),this.isAcceptableClick=function(a){var b=new PathExpression(a),c=b.getLastSegment();return"a"===c.getName().toLowerCase()},this.nodesEqual=function(a,b){return a.getAttribute("url")==b.getAttribute("url")},this.abstractNode=function(a){return this.purgeChildren(a),a},this.purgeChildren=function(a){for(var b=[],c=0;c<a.m_children.length;c++){var d=a.m_children[c],e=this.purgeChildren(d);null!==e&&b.push(d)}return a.m_children=b,a.m_children.length>0||"A"==a.m_name||"a"==a.m_name?a:null}}function WsmHttpRequest(){this.m_method=0,this.getMethod=function(){return this.m_method},this.setMethod=function(a){this.m_method=a},this.getByteSize=function(){return 4},this.toXml=function(a){var b="";return b+=a+'<request method="'+WsmHttpRequest.codeToName(this.m_method)+'" />'}}function WsmEdge(a){this.m_id=a,this.m_contents="",this.m_destination=0,this.m_httpRequest=null,this.m_isAjax=!1,this.m_animationSteps=[],this.getId=function(){return this.m_id},this.setContents=function(a){this.m_contents=a},this.getContents=function(){return this.m_contents},this.isAjax=function(){return this.m_isAjax},this.setAjax=function(a){this.m_isAjax=a},this.setHttpRequest=function(a){return a instanceof WsmHttpRequest?(this.m_httpRequest(a),void 0):(console.error("Invalid argument for setHttpRequest"),void 0)},this.getHttpRequest=function(){return this.m_httpRequest()},this.setDestination=function(a){this.m_destination=a},this.getDestination=function(){return this.m_destination},this.equals=function(a){return void 0===a||null===a?!1:a instanceof WsmEdge?a.m_destination!==this.m_destination?!1:a.m_contents!==this.m_contents?!1:!0:!1},this.addAnimationStep=function(a){this.m_animationSteps.push(a)},this.toDot=function(a){var b="";b+=a+" -> "+this.m_destination+' [label="'+this.m_contents+'"]; // ';for(var c=0;c<this.m_animationSteps.length;c++)c>0&&(b+=","),b+=this.m_animationSteps[c];return b},this.getByteSize=function(){var a=4+this.m_contents.length;return void 0!==this.m_httpRequest&&null!==this.m_httpRequest&&(a+=this.m_httpRequest.getByteSize()),a},this.elementOf=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(this.equals(c))return c}return null},this.toXml=function(a){var b=0;void 0===a&&(a="");var c="";c+=a+"<edge>\n",c+=a+"  <destination>"+this.m_destination+"</destination>\n",c+=a+"  <contents>"+this.m_contents+"</contents>\n";var d="false";for(this.m_isAjax&&(d="true"),c+=a+"  <isAjax>",c+=this.m_isAjax?"true":"false",c+="</isAjax>\n",void 0!==this.m_httpRequest&&null!==this.m_httpRequest&&(c+=this.m_httpRequest.toXml(a+"    ")+"\n"),c+=a+"  <visits>\n",b=0;b<this.m_animationSteps.length;b++)c+=a+"    <visit>"+this.m_animationSteps[b]+"</visit>\n";return c+=a+"  </visits>\n",c+=a+"</edge>\n"}}function WsmNode(a){this.m_id=a,this.m_contents=0,this.m_exhausted=!1,this.m_nextElementToClick="",this.m_animationSteps=[],this.getId=function(){return this.m_id},this.isExhausted=function(a){return this.m_exhausted===!0?!0:""!==this.m_nextElementToClick?!1:(this.computeNextElement(a),""!==this.m_nextElementToClick?!1:!0)},this.setContents=function(a){this.m_contents=a},this.getContents=function(){return this.m_contents},this.addAnimationStep=function(a){this.m_animationSteps.push(a)},this.resetClicks=function(){this.m_exhausted=!1,this.m_contents.setAllMarks(WsmNode.NOT_CLICKED),this.m_nextElementToClick=""},this.getNextElement=function(){var a=new WsmEdge(0);return a.setContents(this.m_nextElementToClick),this.m_nextElementToClick="",a},this.computeNextElement=function(a){void 0===a&&(a=function(){return!0});for(var b="dummy",c=this.m_contents;null!==b&&""!==b;){if(b=c.prefixLookForMark(WsmNode.NOT_CLICKED),null===b||""===b)return this.m_exhausted=!0,void 0;var d=c.getElementFromPathString(b);if(null===d)return console.error("No element at the end of path"),void 0;if(d.setMark(WsmNode.CLICKED),a(b,c))return this.m_nextElementToClick=b,void 0}this.m_exhausted=!0},this.getByteSize=function(){return 4+this.m_contents.getByteSize()},this.countNodes=function(){return this.m_contents.countNodes()},this.toDot=function(){var a="";a+=this.m_id+' [shape=circle,label="'+this.m_id+'"]; // ';for(var b=0;b<this.m_animationSteps.length;b++)b>0&&(a+=","),a+=this.m_animationSteps[b];return a},this.toXml=function(a){var b=0;void 0===a&&(a="");var c="";for(c+=a+"<node>\n",c+=a+"  <id>"+this.m_id+"</id>\n",c+=a+"  <visits>\n",b=0;b<this.m_animationSteps.length;b++)c+=a+"    <visit>"+this.m_animationSteps[b]+"</visit>\n";return c+=a+"  </visits>\n",c+=a+"  <contents>\n",c+=this.m_contents.toXml(a+"  ")+"\n",c+=a+"  </contents>\n",c+=a+"</node>"}}function PathSequence(a){if(this.m_elements=[],this.append=function(a){this.m_elements.push(a)},this.getElement=function(a){return a>=this.m_elements.length||0>a?(console.error("Calling getElement outside of valid range"),void 0):this.m_elements[a]},this.popFirstElement=function(){return 0===this.m_elements.length?(console.error("Calling popFirstElement on an empty sequence"),void 0):this.m_elements.shift()},this.popLastElement=function(){return 0===this.m_elements.length?(console.error("Calling popLastElement on an empty sequence"),void 0):this.m_elements.pop()},this.peekLastElement=function(){return 0===this.m_elements.length?(console.error("Calling peekLastElement on an empty sequence"),void 0):this.m_elements[this.m_elements.length-1]},this.isEmpty=function(){return 0===this.m_elements.length},this.getLength=function(){return this.m_elements.length},this.clear=function(){this.m_elements=[]},this.toString=function(){for(var a="",b=0;b<this.m_elements.length;b++){b>0&&(a+=",");var c=this.m_elements[b];a+=c.toString()}return a},void 0!==a&&a instanceof PathSequence)for(var b=0;b<a.m_elements.length;b++){var c=a.m_elements[b];this.m_elements.push(c)}}function WebStateMachine(){this.m_nodes=[],this.m_edges=[],this.m_domTree=new DomNode,this.m_animationStepCounter=0,this.m_currentNodeId=0,this.m_expectedNextNodeId=null,this.m_idNodeCounter=0,this.m_idEdgeCounter=0,this.m_pathToFollow=new PathSequence,this.m_pathSinceBeginning=new PathSequence,this.m_evaluateStopOracle=!0,this.m_evaluateTestOracle=!0,this.m_oracleMustStop=!1,this.nodesEqual=function(){console.error("nodesEqual must be overridden by WSM subclasses")},this.isAcceptableClick=function(){console.error("isAcceptableClick must be overridden by WSM subclasses")},this.processReset=function(){console.error("processReset must be overridden by WSM subclasses")},this.abstractNode=function(){console.error("abstractNode must be overridden by WSM subclasses")},this.getByteSize=function(){var a=0,b=0;for(b=0;b<this.m_nodes.length;b++){var c=this.m_nodes[b];a+=c.getByteSize()}for(b=0;b<this.m_edges.length;b++){var d=this.m_edges[b];if(void 0!==d)for(var e=0;e<d.length;e++){var f=d[e];a+=f.getByteSize()}}return a},this.countNodes=function(){return this.m_nodes.length},this.countEdges=function(){return this.m_edges.length},this.resetClicks=function(){var a=this.getNodeFromId(this.m_currentNodeId);a.resetClicks()},this.setCurrentDom=function(a,b,c){var d=null,e=null,f=null;if(a instanceof Document)d=DomNode.parseFromDom(a);else{if(!(a instanceof DomNode))return console.error("Argument of setCurrentDom is neither a document nor a DomNode"),void 0;d=a}if(this.m_evaluateStopOracle&&void 0!==WebStateMachine.stop_oracle&&(this.m_oracleMustStop=WebStateMachine.stop_oracle(d)),this.m_evaluateTestOracle&&void 0!==WebStateMachine.test_oracle){var g=WebStateMachine.test_oracle(d);g||console.log("Test oracle returned false!")}if(d=this.abstractNode(d),0===this.m_nodes.length){this.m_idNodeCounter++,e=new WsmNode(this.m_idNodeCounter),e.setContents(d),e.addAnimationStep(this.m_animationStepCounter++),this.m_nodes.push(e),this.m_currentNodeId=this.m_idNodeCounter,this.m_domTree=d;var h=new WsmEdge;return h.setDestination(this.m_idNodeCounter),h.setAjax(c),this.m_pathSinceBeginning.append(h),void 0}if(null!==this.m_expectedNextNodeId){var i=this.getNodeFromDom(d);if(null===i)return console.error("Sanity check fail: according to computed path, expected node ID was "+this.m_expectedNextNodeId+"; we are rather in a NEW node"),void 0;var j=i.getId();if(this.m_expectedNextNodeId!=j)return console.error("Sanity check fail: according to computed path, expected node ID was "+this.m_expectedNextNodeId+"; we are rather in node "+j),void 0}if(this.nodesEqual(this.m_domTree,d))return this.getNodeFromId(this.m_currentNodeId),void 0;if(e=this.getNodeFromDom(d),null===e&&(e=new WsmNode(++this.m_idNodeCounter),e.setContents(d),this.m_nodes.push(e)),f=e.getId(),void 0!==b&&""!==b&&null!==b){var k=new WsmEdge(++this.m_idEdgeCounter);k.setContents(b),k.setDestination(f),void 0===this.m_edges[this.m_currentNodeId]&&(this.m_edges[this.m_currentNodeId]=[]);var l=k.elementOf(this.m_edges[this.m_currentNodeId]);null===l&&(this.m_edges[this.m_currentNodeId].push(k),l=k),l.addAnimationStep(this.m_animationStepCounter++),this.m_pathSinceBeginning.append(l)}this.m_domTree=e.getContents(),this.m_currentNodeId=f,e.addAnimationStep(this.m_animationStepCounter++)},this.getNodeFromDom=function(a){for(var b=0;b<this.m_nodes.length;b++){var c=this.m_nodes[b],d=c.getContents();if(this.nodesEqual(a,d))return c}return null},this.getNodeFromId=function(a){for(var b=0;b<this.m_nodes.length;b++){var c=this.m_nodes[b];if(c.getId()==a)return c}return null},this.getNextClick=function(){if(!this.m_pathToFollow.isEmpty()){var a=this.m_pathToFollow.popFirstElement();return this.m_expectedNextNodeId=a.getDestination(),a}this.m_expectedNextNodeId=null;var b=this.getNodeFromId(this.m_currentNodeId);if(void 0===b||null===b)return console.error("Current node is undefined"),null;if(b.getContents(),b.isExhausted(this.isAcceptableClick)||this.m_oracleMustStop){if(this.m_oracleMustStop=!1,!this.processReset())return null;var c=this.m_pathToFollow.popFirstElement();return this.m_expectedNextNodeId=c.getDestination(),this.m_expectedNextNodeId==this.m_currentNodeId?null:c}var d=b.getNextElement(this.isAcceptableClick);return d},this.toDot=function(){var a=0,b="";for(b+="digraph G {\n",a=0;a<this.m_nodes.length;a++){var c=this.m_nodes[a],d=c.getId();b+="  "+c.toDot()+"\n";var e=this.m_edges[d];if(void 0!==e)for(var f=0;f<e.length;f++){var g=e[f];g.getDestination(),g.getContents(),b+="  "+g.toDot(d)+"\n"}}return b+='  0 [shape=none,label=""]; // 0\n',b+="  0 -> 1; // 0\n",b+="}"},this.toXml=function(a){var b=0,c=null;void 0===a&&(a="");var d="";for(d+=a+"<wsm>\n",d+=a+"  <stats>\n",d+=a+"    <nodeCount>"+this.countNodes()+"</nodeCount>\n",d+=a+"    <edgeCount>"+this.countEdges()+"</edgeCount>\n",d+=a+"    <byteSize>"+this.getByteSize()+"</byteSize>\n",d+=a+"  </stats>\n",d+=a+"  <nodes>\n",b=0;b<this.m_nodes.length;b++)c=this.m_nodes[b],void 0!==c&&null!==c&&(d+=c.toXml(a+"    ")+"\n");for(d+=a+"  </nodes>\n",d+=a+"  <edges>\n",b=0;b<this.m_nodes.length;b++)if(c=this.m_nodes[b],void 0!==c&&null!==c){var e=c.getId(),f=this.m_edges[e];if(void 0!==f&&null!==f){d+=a+'    <source id="'+e+'">\n';for(var g=0;g<f.length;g++){var h=f[g];d+=h.toXml(a+"      ")+"\n"}d+=a+"    </source>\n",d+=c.toXml(a+"    ")+"\n"}}return d+=a+"  </edges>\n",d+=a+"</wsm>"}}DomNode.parseFromDom=function(a){var b=0,c=new DomNode;if(c.m_name=a.nodeName,"#text"==c.m_name)c.m_name=a.nodeValue,c.m_isLeaf=!0;else{if(void 0!==a.attributes&&!DomNode.IGNORE_ATTRIBUTES)for(b=0;b<a.attributes.length;b++){var d=a.attributes[b],e=new DomNodeAttribute(d.nodeName,d.nodeValue);c.m_attributes.push(e)}for(DomNode.IGNORE_HANDLERS||void 0!==a.onclick&&null!==a.onclick&&(c.m_handlers["on-click"]=!0),b=0;b<a.childNodes.length;b++){var f=a.childNodes[b],g=DomNode.parseFromDom(f);c.m_children.push(g)}}return c},DomNode.parseFromStringChildren=function(a){var b=[],c=a;c=c.trim();for(var d=null;c.length>0;){d=new DomNode;var e=c.indexOf(">");if(-1==e){d.m_isLeaf=!0,d.m_name=c,b.push(d);break}var f=c.substring(1,e);d.m_name=f;var g=c.indexOf("</"+f+">");if(-1==g)return console.error("Error parsing DOM from string: end of tag "+f+" not found"),void 0;var h=g+f.length+2;if(h>=c.length)return console.error("Error parsing DOM from string: end of tag "+f+" past end of string"),void 0;var i=c.substring(e+1,g);d.m_children=DomNode.parseFromStringChildren(i),b.push(d),c=c.substring(h+1).trim()}return b},DomNode.parseFromString=function(a){var b=DomNode.parseFromStringChildren(a);return b.length>=1?b[0]:null},DomNode.are_equal=function(a,b){return DomNode.prototype.isPrototypeOf(a)?a.equals(b):!1},DomNode.IGNORE_ATTRIBUTES=!0,DomNode.IGNORE_HANDLERS=!1,WsmHttpRequest.codeToName=function(a){var b="";return a==WsmHttpRequest.GET?b="GET":a==WsmHttpRequest.POST?b="POST":a==WsmHttpRequest.PUT&&(b="PUT"),a==WsmHttpRequest.DELETE&&(b="DELETE"),b},WsmHttpRequest.GET=0,WsmHttpRequest.POST=1,WsmHttpRequest.DELETE=2,WsmHttpRequest.PUT=4,WsmNode.NOT_CLICKED=0,WsmNode.CLICKED=1;